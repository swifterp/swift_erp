<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="resources.mapper.selectListMapper">

	<select id="getDraftList" resultType="hashmap">
	
		select DRAFT_NO,DRAFT_DATE,draft_writer from draft
	
	</select>
	
	<select id="getDraftDetailList" parameterType="Integer" resultType="hashmap">
	
		select DRAFT_NO, DRAFT_TITLE, DRAFT_DATE, DRAFT_WRITER, DRAFT_REFERENCE ,DRAFT_OWNER
				,DRAFT_STYLE, DRAFT_DIVISION, DRAFT_CONTENT  from draft
			<where>
			DRAFT_NO = #{draft_num}
			</where>
	
	</select>
	<resultMap type="String" id="StyleSheet">

	<result property="STYLE_CONTENT" column="STYLE_CONTENT" jdbcType="CLOB" javaType="java.lang.String" />

</resultMap>
	<select id="getCommon" parameterType="Integer" resultType="HashMap" resultMap="StyleSheet">
		
		select style_code,style_name,style_content from common_style where style_code=#{style_code,jdbcType=INTEGER} 
		order by style_code
		
	</select>

	<select id="getCommonList" resultType="hashmap">
	
		select style_code,style_name from common_style order by style_code
	
	</select>
	
	<select id="getApprovalPathList" resultType="hashmap">
			select  PATH_CODE, PATH_NAME,
            (select emp_name from employee where empno = PATH_FIRSTEMP) as "F_EMP_NAME" ,
            (select emp_name from employee where empno = PATH_SECONDEMP) as "S_EMP_NAME", 
            (select emp_name from employee where empno = PATH_THIRDEMP) as "T_EMP_NAME" 
            from APPROVAL_PATH
	</select>
	
	<select id="getMyApprovalList" parameterType = "Integer" resultType="hashmap">
		select   DRAFT_NO,DRAFT_DATE,DRAFT_STYLE from draft
				<where>
					draft_writer = (select emp_name from employee where empno=#{EMPNO,jdbcType=INTEGER})
				</where>
	</select>
	
</mapper>