<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="resources.mapper.selectListMapper">

	<select id="getEmpList" resultType="hashmap">		
        select e.empno, e.emp_number, e.emp_name, e.emp_email, e.emp_resident_number, d.dname, r.rank_name, e.emp_join_date 
        from employee e, dept d, rank r
        where d.deptno=e.deptno and r.rank_no=e.rank_no
        order by e.emp_number
	</select>
	<!-- 사원번호중복 확인 -->
	<select id="empNumCheck" parameterType="Integer" resultType="Integer">
	 select emp_number from employee
	     where emp_number = #{emp_number, jdbcType=INTEGER}
	</select>
	
	<select id="getEmpView" parameterType="Integer" resultType="hashmap">		
        select e.emp_number, e.emp_name, e.emp_email, e.emp_resident_number, d.dname, r.rank_name, e.emp_join_date 
        from employee e, dept d, rank r
        where d.deptno=e.deptno and r.rank_no=e.rank_no and e.emp_number = #{emp_number}
	</select>
	<select id="getEmpNumList" resultType="hashmap">		
        select e.emp_number, e.emp_name, d.dname
        from employee e, dept d
	</select>
	<select id="getAppointList" resultType="hashmap">		
        select a.emp_appoint_no, to_char(a.emp_appoint_date,'YYYY-MM-DD') as emp_appoint_date,e.emp_number,e.emp_name,a.next_rank,a.next_dept
        from emp_appoint a, employee e
        where a.empno = e.empno
        order by a.emp_appoint_date desc
	</select>
	<select id="getAppointView" parameterType="Integer" resultType="hashmap">		
        select a.emp_appoint_no, a.empno, to_char(a.emp_appoint_date,'YYYY-MM-DD') as emp_appoint_date,e.emp_number,e.emp_name
       		  ,a.prev_rank,a.next_rank,a.prev_dept,a.next_dept
        from emp_appoint a, employee e
        where a.empno = e.empno and a.emp_appoint_no = #{emp_appoint_no, jdbcType=INTEGER}
	</select>
	<select id="getEmpDeptList" resultType="hashmap">		
        select deptno,dname
        from dept
        order by deptno
	</select>
		<select id="getDeptView" parameterType="Integer" resultType="hashmap">		
        select deptno, dname
        from dept
        where deptno = #{deptno}
	</select>
	<select id="getEmpData" parameterType="String" resultType="hashmap">
		select e.emp_number, e.emp_name, e.emp_email, e.emp_resident_number, d.dname, r.rank_name, e.emp_join_date 
        from employee e, dept d, rank r
        where d.deptno=e.deptno 
        and r.rank_no=e.rank_no
        and (e.emp_name like '%'||#{empinfo, jdbcType=VARCHAR}||'%' or d.dname like '%'||#{empinfo, jdbcType=VARCHAR}||'%')
        order by e.emp_number
	</select>
	<select id="getRankList" resultType="hashmap">		
        select rank_no,rank_name
        from rank
        order by rank_no
	</select>
	<select id="getDutyList" resultType="hashmap">		
        select duty_no,duty_name
        from duty
        order by duty_no
	</select>
	<select id="getBankList" resultType="hashmap">		
        select bank_no,bank_name
        from bank
        order by bank_no
	</select>
	<select id="checkEmpNum" parameterType="String" resultType="Integer">		
        select COUNT(*) from employee
        where emp_number = #{emp_number}
	</select>
	
</mapper>